(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[73],{"1lYZ":function(e,t,n){"use strict";n("EOg0"),n("6UJY"),n("3C9j"),n("n5oc")},"6UJY":function(e,t,n){},BPUQ:function(e,t,n){"use strict";var a=n("BCYH"),r=n("/l8f"),o=n("q1tI"),c=n("eY4W"),i=n("bbS/"),d=n("fcBh"),l=n("1u6e"),s=n("7HZt"),u=n("LQlQ"),p=n("7GKy"),f=n("I4sY"),v=n("RUi5"),h=n("iRYi"),y=n("HG+C"),g=n("j6ty"),b=n("KhXA"),k=n("IJzj"),O=n("S6kk"),m=n.n(O),K=o["createContext"](null),E=function(e){for(var t=e.prefixCls,n=e.level,a=e.isStart,c=e.isEnd,i="".concat(t,"-indent-unit"),d=[],l=0;l<n;l+=1){var s;d.push(o["createElement"]("span",{key:l,className:m()(i,(s={},Object(r["a"])(s,"".concat(i,"-start"),a[l]),Object(r["a"])(s,"".concat(i,"-end"),c[l]),s))}))}return o["createElement"]("span",{"aria-hidden":"true",className:"".concat(t,"-indent")},d)},C=E,N="open",x="close",j="---",w=function(e){Object(d["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.state={dragNodeHighlight:!1},e.onSelectorClick=function(t){var n=e.props.context.onNodeClick;n(t,z(e.props)),e.isSelectable()?e.onSelect(t):e.onCheck(t)},e.onSelectorDoubleClick=function(t){var n=e.props.context.onNodeDoubleClick;n(t,z(e.props))},e.onSelect=function(t){if(!e.isDisabled()){var n=e.props.context.onNodeSelect;t.preventDefault(),n(t,z(e.props))}},e.onCheck=function(t){if(!e.isDisabled()){var n=e.props,a=n.disableCheckbox,r=n.checked,o=e.props.context.onNodeCheck;if(e.isCheckable()&&!a){t.preventDefault();var c=!r;o(t,z(e.props),c)}}},e.onMouseEnter=function(t){var n=e.props.context.onNodeMouseEnter;n(t,z(e.props))},e.onMouseLeave=function(t){var n=e.props.context.onNodeMouseLeave;n(t,z(e.props))},e.onContextMenu=function(t){var n=e.props.context.onNodeContextMenu;n(t,z(e.props))},e.onDragStart=function(t){var n=e.props.context.onNodeDragStart;t.stopPropagation(),e.setState({dragNodeHighlight:!0}),n(t,Object(k["a"])(e));try{t.dataTransfer.setData("text/plain","")}catch(a){}},e.onDragEnter=function(t){var n=e.props.context.onNodeDragEnter;t.preventDefault(),t.stopPropagation(),n(t,Object(k["a"])(e))},e.onDragOver=function(t){var n=e.props.context.onNodeDragOver;t.preventDefault(),t.stopPropagation(),n(t,Object(k["a"])(e))},e.onDragLeave=function(t){var n=e.props.context.onNodeDragLeave;t.stopPropagation(),n(t,Object(k["a"])(e))},e.onDragEnd=function(t){var n=e.props.context.onNodeDragEnd;t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,Object(k["a"])(e))},e.onDrop=function(t){var n=e.props.context.onNodeDrop;t.preventDefault(),t.stopPropagation(),e.setState({dragNodeHighlight:!1}),n(t,Object(k["a"])(e))},e.onExpand=function(t){var n=e.props,a=n.loading,r=n.context.onNodeExpand;a||r(t,z(e.props))},e.setSelectHandle=function(t){e.selectHandle=t},e.getNodeState=function(){var t=e.props.expanded;return e.isLeaf()?null:t?N:x},e.hasChildren=function(){var t=e.props.eventKey,n=e.props.context.keyEntities,a=n[t]||{},r=a.children;return!!(r||[]).length},e.isLeaf=function(){var t=e.props,n=t.isLeaf,a=t.loaded,r=e.props.context.loadData,o=e.hasChildren();return!1!==n&&(n||!r&&!o||r&&a&&!o)},e.isDisabled=function(){var t=e.props.disabled,n=e.props.context.disabled;return!(!n&&!t)},e.isCheckable=function(){var t=e.props.checkable,n=e.props.context.checkable;return!(!n||!1===t)&&n},e.syncLoadData=function(t){var n=t.expanded,a=t.loading,r=t.loaded,o=e.props.context,c=o.loadData,i=o.onNodeLoad;a||c&&n&&!e.isLeaf()&&(e.hasChildren()||r||i(z(e.props)))},e.renderSwitcher=function(){var t=e.props,n=t.expanded,a=t.switcherIcon,r=e.props.context,c=r.prefixCls,i=r.switcherIcon,d=a||i;if(e.isLeaf())return o["createElement"]("span",{className:m()("".concat(c,"-switcher"),"".concat(c,"-switcher-noop"))},"function"===typeof d?d(Object(f["a"])(Object(f["a"])({},e.props),{},{isLeaf:!0})):d);var l=m()("".concat(c,"-switcher"),"".concat(c,"-switcher_").concat(n?N:x));return o["createElement"]("span",{onClick:e.onExpand,className:l},"function"===typeof d?d(Object(f["a"])(Object(f["a"])({},e.props),{},{isLeaf:!1})):d)},e.renderCheckbox=function(){var t=e.props,n=t.checked,a=t.halfChecked,r=t.disableCheckbox,c=e.props.context.prefixCls,i=e.isDisabled(),d=e.isCheckable();if(!d)return null;var l="boolean"!==typeof d?d:null;return o["createElement"]("span",{className:m()("".concat(c,"-checkbox"),n&&"".concat(c,"-checkbox-checked"),!n&&a&&"".concat(c,"-checkbox-indeterminate"),(i||r)&&"".concat(c,"-checkbox-disabled")),onClick:e.onCheck},l)},e.renderIcon=function(){var t=e.props.loading,n=e.props.context.prefixCls;return o["createElement"]("span",{className:m()("".concat(n,"-iconEle"),"".concat(n,"-icon__").concat(e.getNodeState()||"docu"),t&&"".concat(n,"-icon_loading"))})},e.renderSelector=function(){var t,n,a=e.state.dragNodeHighlight,r=e.props,c=r.title,i=r.selected,d=r.icon,l=r.loading,s=r.data,u=e.props.context,p=u.prefixCls,f=u.showIcon,v=u.icon,h=u.draggable,y=u.loadData,g=u.titleRender,b=e.isDisabled(),k="function"===typeof h?h(s):h,O="".concat(p,"-node-content-wrapper");if(f){var K=d||v;t=K?o["createElement"]("span",{className:m()("".concat(p,"-iconEle"),"".concat(p,"-icon__customize"))},"function"===typeof K?K(e.props):K):e.renderIcon()}else y&&l&&(t=e.renderIcon());n="function"===typeof c?c(s):g?g(s):c;var E=o["createElement"]("span",{className:"".concat(p,"-title")},n);return o["createElement"]("span",{ref:e.setSelectHandle,title:"string"===typeof c?c:"",className:m()("".concat(O),"".concat(O,"-").concat(e.getNodeState()||"normal"),!b&&(i||a)&&"".concat(p,"-node-selected"),!b&&k&&"draggable"),draggable:!b&&k||void 0,"aria-grabbed":!b&&k||void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onContextMenu:e.onContextMenu,onClick:e.onSelectorClick,onDoubleClick:e.onSelectorDoubleClick,onDragStart:k?e.onDragStart:void 0},t,E,e.renderDropIndicator())},e.renderDropIndicator=function(){var t=e.props,n=t.disabled,a=t.eventKey,r=e.props.context,o=r.draggable,c=r.dropLevelOffset,i=r.dropPosition,d=r.prefixCls,l=r.indent,s=r.dropIndicatorRender,u=r.dragOverNodeKey,p=r.direction,f=!1!==o,v=!n&&f&&u===a;return v?s({dropPosition:i,dropLevelOffset:c,indent:l,prefixCls:d,direction:p}):null},e}return Object(i["a"])(n,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var e=this.props.selectable,t=this.props.context.selectable;return"boolean"===typeof e?e:t}},{key:"render",value:function(){var e,t=this.props,n=t.eventKey,c=t.className,i=t.style,d=t.dragOver,l=t.dragOverGapTop,s=t.dragOverGapBottom,u=t.isLeaf,p=t.isStart,f=t.isEnd,v=t.expanded,h=t.selected,g=t.checked,b=t.halfChecked,k=t.loading,O=t.domRef,K=t.active,E=t.data,N=t.onMouseMove,x=Object(y["a"])(t,["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove"]),j=this.props.context,w=j.prefixCls,S=j.filterTreeNode,D=j.draggable,P=j.keyEntities,L=j.dropContainerKey,T=j.dropTargetKey,I=this.isDisabled(),M=_(x),A=P[n]||{},R=A.level,H=f[f.length-1],V="function"===typeof D?D(E):D;return o["createElement"]("div",Object(a["a"])({ref:O,className:m()(c,"".concat(w,"-treenode"),(e={},Object(r["a"])(e,"".concat(w,"-treenode-disabled"),I),Object(r["a"])(e,"".concat(w,"-treenode-switcher-").concat(v?"open":"close"),!u),Object(r["a"])(e,"".concat(w,"-treenode-checkbox-checked"),g),Object(r["a"])(e,"".concat(w,"-treenode-checkbox-indeterminate"),b),Object(r["a"])(e,"".concat(w,"-treenode-selected"),h),Object(r["a"])(e,"".concat(w,"-treenode-loading"),k),Object(r["a"])(e,"".concat(w,"-treenode-active"),K),Object(r["a"])(e,"".concat(w,"-treenode-leaf-last"),H),Object(r["a"])(e,"drop-target",T===n),Object(r["a"])(e,"drop-container",L===n),Object(r["a"])(e,"drag-over",!I&&d),Object(r["a"])(e,"drag-over-gap-top",!I&&l),Object(r["a"])(e,"drag-over-gap-bottom",!I&&s),Object(r["a"])(e,"filter-node",S&&S(z(this.props))),e)),style:i,onDragEnter:V?this.onDragEnter:void 0,onDragOver:V?this.onDragOver:void 0,onDragLeave:V?this.onDragLeave:void 0,onDrop:V?this.onDrop:void 0,onDragEnd:V?this.onDragEnd:void 0,onMouseMove:N},M),o["createElement"](C,{prefixCls:w,level:R,isStart:p,isEnd:f}),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),n}(o["Component"]),S=function(e){return o["createElement"](K.Consumer,null,(function(t){return o["createElement"](w,Object(a["a"])({},e,{context:t}))}))};S.displayName="TreeNode",S.defaultProps={title:j},S.isTreeNode=1;var D=S;function P(e,t){var n=e.slice(),a=n.indexOf(t);return a>=0&&n.splice(a,1),n}function L(e,t){var n=e.slice();return-1===n.indexOf(t)&&n.push(t),n}function T(e){return e.split("-")}function I(e,t){return"".concat(e,"-").concat(t)}function M(e){return e&&e.type&&e.type.isTreeNode}function A(e,t){var n=[],a=t[e];function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){var t=e.key,a=e.children;n.push(t),r(a)}))}return r(a.children),n}function R(e){if(e.parent){var t=T(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function H(e){var t=T(e.pos);return 0===Number(t[t.length-1])}function V(e,t,n,a,r,o,c,i,d){var l,s=e.clientX,u=e.clientY,p=e.target.getBoundingClientRect(),f=p.top,v=p.height,h=("rtl"===d?-1:1)*(((null===a||void 0===a?void 0:a.x)||0)-s),y=(h-12)/n,g=c[t.props.eventKey];if(u<f+v/2){var b=o.findIndex((function(e){return e.data.key===g.key})),k=b<=0?0:b-1,O=o[k].data.key;g=c[O]}for(var m=g,K=g.key,E=0,C=0,N=0;N<y;N+=1){if(!R(g))break;g=g.parent,C+=1}var x=g.node,j=!0;return H(g)&&0===g.level&&u<f+v/2&&r({dropNode:x,dropPosition:-1})&&g.key===t.props.eventKey?E=-1:(m.children||[]).length&&i.includes(K)?r({dropNode:x,dropPosition:0})?E=0:j=!1:0===C?y>-1.5?r({dropNode:x,dropPosition:1})?E=1:j=!1:r({dropNode:x,dropPosition:0})?E=0:r({dropNode:x,dropPosition:1})?E=1:j=!1:r({dropNode:x,dropPosition:1})?E=1:j=!1,{dropPosition:E,dropLevelOffset:C,dropTargetKey:g.key,dropTargetPos:g.pos,dragOverNodeKey:K,dropContainerKey:0===E?null:(null===(l=g.parent)||void 0===l?void 0:l.key)||null,dropAllowed:j}}function W(e,t){if(e){var n=t.multiple;return n?e.slice():e.length?[e[0]]:e}}function F(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else{if("object"!==Object(u["a"])(e))return Object(b["a"])(!1,"`checkedKeys` is not an array or an object"),null;t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return t}function B(e,t){var n=new Set;function a(e){if(!n.has(e)){var r=t[e];if(r){n.add(e);var o=r.parent,c=r.node;c.disabled||o&&a(o.key)}}}return(e||[]).forEach((function(e){a(e)})),Object(s["a"])(n)}function _(e){var t={};return Object.keys(e).forEach((function(n){(n.startsWith("data-")||n.startsWith("aria-"))&&(t[n]=e[n])})),t}function G(e,t){return null!==e&&void 0!==e?e:t}function U(e){function t(e){var n=Object(g["a"])(e);return n.map((function(e){if(!M(e))return Object(b["a"])(!e,"Tree/TreeNode can only accept TreeNode as children."),null;var n=e.key,a=e.props,r=a.children,o=Object(y["a"])(a,["children"]),c=Object(f["a"])({key:n},o),i=t(r);return i.length&&(c.children=i),c})).filter((function(e){return e}))}return t(e)}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new Set(!0===t?[]:t),a=[];function r(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.map((function(c,i){var d=I(o?o.pos:"0",i),l=G(c.key,d),u=Object(f["a"])(Object(f["a"])({},c),{},{parent:o,pos:d,children:null,data:c,isStart:[].concat(Object(s["a"])(o?o.isStart:[]),[0===i]),isEnd:[].concat(Object(s["a"])(o?o.isEnd:[]),[i===e.length-1])});return a.push(u),!0===t||n.has(l)?u.children=r(c.children||[],u):u.children=[],u}))}return r(e),a}function q(e,t,n){var a,r,o=null,c=Object(u["a"])(n);function i(n,o,c){var d=n?n[a]:e,l=n?I(c.pos,o):"0";if(n){var s=r(n,l),u={node:n,index:o,pos:l,key:s,parentPos:c.node?c.pos:null,level:c.level+1};t(u)}d&&d.forEach((function(e,t){i(e,t,{node:n,pos:l,level:c?c.level+1:-1})}))}"function"===c||"string"===c?o=n:n&&"object"===c&&(a=n.childrenPropName,o=n.externalGetKey),a=a||"children",o?"string"===typeof o?r=function(e){return e[o]}:"function"===typeof o&&(r=function(e){return o(e)}):r=function(e,t){return G(e.key,t)},i(null)}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.initWrapper,a=t.processEntity,r=t.onProcessFinished,o=t.externalGetKey,c=t.childrenPropName,i=arguments.length>2?arguments[2]:void 0,d=o||i,l={},s={},u={posEntities:l,keyEntities:s};return n&&(u=n(u)||u),q(e,(function(e){var t=e.node,n=e.index,r=e.pos,o=e.key,c=e.parentPos,i=e.level,d={node:t,index:n,key:o,pos:r,level:i},p=G(o,r);l[r]=d,s[p]=d,d.parent=l[c],d.parent&&(d.parent.children=d.parent.children||[],d.parent.children.push(d)),a&&a(d,u)}),{externalGetKey:d,childrenPropName:c}),r&&r(u),u}function X(e,t){var n=t.expandedKeys,a=t.selectedKeys,r=t.loadedKeys,o=t.loadingKeys,c=t.checkedKeys,i=t.halfCheckedKeys,d=t.dragOverNodeKey,l=t.dropPosition,s=t.keyEntities,u=s[e],p={eventKey:e,expanded:-1!==n.indexOf(e),selected:-1!==a.indexOf(e),loaded:-1!==r.indexOf(e),loading:-1!==o.indexOf(e),checked:-1!==c.indexOf(e),halfChecked:-1!==i.indexOf(e),pos:String(u?u.pos:""),dragOver:d===e&&0===l,dragOverGapTop:d===e&&-1===l,dragOverGapBottom:d===e&&1===l};return p}function z(e){var t=e.data,n=e.expanded,a=e.selected,r=e.checked,o=e.loaded,c=e.loading,i=e.halfChecked,d=e.dragOver,l=e.dragOverGapTop,s=e.dragOverGapBottom,u=e.pos,p=e.active,v=Object(f["a"])(Object(f["a"])({},t),{},{expanded:n,selected:a,checked:r,loaded:o,loading:c,halfChecked:i,dragOver:d,dragOverGapTop:l,dragOverGapBottom:s,pos:u,active:p});return"props"in v||Object.defineProperty(v,"props",{get:function(){return Object(b["a"])(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),v}function Q(e,t){var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n}function Z(e){var t=e||{},n=t.disabled,a=t.disableCheckbox,r=t.checkable;return!(!n&&!a)||!1===r}function $(e,t,n,a){for(var r=new Set(e),o=new Set,c=0;c<=n;c+=1){var i=t.get(c)||new Set;i.forEach((function(e){var t=e.key,n=e.node,o=e.children,c=void 0===o?[]:o;r.has(t)&&!a(n)&&c.filter((function(e){return!a(e.node)})).forEach((function(e){r.add(e.key)}))}))}for(var d=new Set,l=n;l>=0;l-=1){var s=t.get(l)||new Set;s.forEach((function(e){var t=e.parent,n=e.node;if(!a(n)&&e.parent&&!d.has(e.parent.key))if(a(e.parent.node))d.add(t.key);else{var c=!0,i=!1;(t.children||[]).filter((function(e){return!a(e.node)})).forEach((function(e){var t=e.key,n=r.has(t);c&&!n&&(c=!1),i||!n&&!o.has(t)||(i=!0)})),c&&r.add(t.key),i&&o.add(t.key),d.add(t.key)}}))}return{checkedKeys:Array.from(r),halfCheckedKeys:Array.from(Q(o,r))}}function ee(e,t,n,a,r){for(var o=new Set(e),c=new Set(t),i=0;i<=a;i+=1){var d=n.get(i)||new Set;d.forEach((function(e){var t=e.key,n=e.node,a=e.children,i=void 0===a?[]:a;o.has(t)||c.has(t)||r(n)||i.filter((function(e){return!r(e.node)})).forEach((function(e){o.delete(e.key)}))}))}c=new Set;for(var l=new Set,s=a;s>=0;s-=1){var u=n.get(s)||new Set;u.forEach((function(e){var t=e.parent,n=e.node;if(!r(n)&&e.parent&&!l.has(e.parent.key))if(r(e.parent.node))l.add(t.key);else{var a=!0,i=!1;(t.children||[]).filter((function(e){return!r(e.node)})).forEach((function(e){var t=e.key,n=o.has(t);a&&!n&&(a=!1),i||!n&&!c.has(t)||(i=!0)})),a||o.delete(t.key),i&&c.add(t.key),l.add(t.key)}}))}return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(Q(c,o))}}function te(e,t,n,a){var r,o=[];r=a||Z;var c,i=new Set(e.filter((function(e){var t=!!n[e];return t||o.push(e),t}))),d=new Map,l=0;return Object.keys(n).forEach((function(e){var t=n[e],a=t.level,r=d.get(a);r||(r=new Set,d.set(a,r)),r.add(t),l=Math.max(l,a)})),Object(b["a"])(!o.length,"Tree missing follow keys: ".concat(o.slice(0,100).map((function(e){return"'".concat(e,"'")})).join(", "))),c=!0===t?$(i,d,l,r):ee(i,t.halfCheckedKeys,d,l,r),c}var ne=n("MHla"),ae=n("7IZY"),re=n("Rafd"),oe=n("iIXr"),ce=n("0otE"),ie=n("V7p6"),de=function(e,t){var n=e.className,r=e.style,c=e.motion,i=e.motionNodes,d=e.motionType,l=e.onMotionStart,s=e.onMotionEnd,u=e.active,f=e.treeNodeRequiredProps,v=Object(y["a"])(e,["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"]),h=o["useState"](!0),g=Object(p["a"])(h,2),b=g[0],k=g[1],O=o["useContext"](K),E=O.prefixCls,C=o["useRef"](!1),N=function(){C.current||s(),C.current=!0};return Object(o["useEffect"])((function(){i&&"hide"===d&&b&&k(!1)}),[i]),Object(o["useEffect"])((function(){return i&&l(),function(){i&&N()}}),[]),i?o["createElement"](ie["b"],Object(a["a"])({ref:t,visible:b},c,{motionAppear:"show"===d,onAppearEnd:N,onLeaveEnd:N}),(function(e,t){var n=e.className,r=e.style;return o["createElement"]("div",{ref:t,className:m()("".concat(E,"-treenode-motion"),n),style:r},i.map((function(e){var t=e.data,n=t.key,r=Object(y["a"])(t,["key"]),c=e.isStart,i=e.isEnd;delete r.children;var d=X(n,f);return o["createElement"](D,Object(a["a"])({},r,d,{active:u,data:e.data,key:n,isStart:c,isEnd:i}))})))})):o["createElement"](D,Object(a["a"])({domRef:t,className:n,style:r},v,{active:u}))};de.displayName="MotionTreeNode";var le=o["forwardRef"](de),se=le;function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length,a=t.length;if(1!==Math.abs(n-a))return{add:!1,key:null};function r(e,t){var n=new Map;e.forEach((function(e){n.set(e,!0)}));var a=t.filter((function(e){return!n.has(e)}));return 1===a.length?a[0]:null}return n<a?{add:!0,key:r(e,t)}:{add:!1,key:r(t,e)}}function pe(e,t,n){var a=e.findIndex((function(e){var t=e.data;return t.key===n})),r=e[a+1],o=t.findIndex((function(e){var t=e.data;return t.key===n}));if(r){var c=t.findIndex((function(e){var t=e.data;return t.key===r.data.key}));return t.slice(o+1,c)}return t.slice(o+1)}var fe={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},ve=function(){},he="RC_TREE_MOTION_".concat(Math.random()),ye={key:he},ge={key:he,level:0,index:0,pos:"0",node:ye},be={parent:null,children:[],pos:ge.pos,data:ye,isStart:[],isEnd:[]};function ke(e,t,n,a){return!1!==t&&n?e.slice(0,Math.ceil(n/a)+1):e}function Oe(e){var t=e.data.key,n=e.pos;return G(t,n)}function me(e){var t=String(e.data.key),n=e;while(n.parent)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}var Ke=function(e,t){var n=e.prefixCls,r=e.data,c=(e.selectable,e.checkable,e.expandedKeys),i=e.selectedKeys,d=e.checkedKeys,l=e.loadedKeys,s=e.loadingKeys,u=e.halfCheckedKeys,f=e.keyEntities,v=e.disabled,h=e.dragging,g=e.dragOverNodeKey,b=e.dropPosition,k=e.motion,O=e.height,m=e.itemHeight,K=e.virtual,E=e.focusable,C=e.activeItem,N=e.focused,x=e.tabIndex,j=e.onKeyDown,w=e.onFocus,S=e.onBlur,D=e.onActiveChange,P=e.onListChangeStart,L=e.onListChangeEnd,T=Object(y["a"])(e,["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"]),I=o["useRef"](null),M=o["useRef"](null);o["useImperativeHandle"](t,(function(){return{scrollTo:function(e){I.current.scrollTo(e)},getIndentWidth:function(){return M.current.offsetWidth}}}));var A=o["useState"](c),R=Object(p["a"])(A,2),H=R[0],V=R[1],W=o["useState"](r),F=Object(p["a"])(W,2),B=F[0],_=F[1],U=o["useState"](r),Y=Object(p["a"])(U,2),q=Y[0],J=Y[1],z=o["useState"]([]),Q=Object(p["a"])(z,2),Z=Q[0],$=Q[1],ee=o["useState"](null),te=Object(p["a"])(ee,2),ne=te[0],ae=te[1];function re(){_(r),J(r),$([]),ae(null),L()}o["useEffect"]((function(){V(c);var e=ue(H,c);if(null!==e.key)if(e.add){var t=B.findIndex((function(t){var n=t.data.key;return n===e.key})),n=ke(pe(B,r,e.key),K,O,m),a=B.slice();a.splice(t+1,0,be),J(a),$(n),ae("show")}else{var o=r.findIndex((function(t){var n=t.data.key;return n===e.key})),i=ke(pe(r,B,e.key),K,O,m),d=r.slice();d.splice(o+1,0,be),J(d),$(i),ae("hide")}else B!==r&&(_(r),J(r))}),[c,r]),o["useEffect"]((function(){h||re()}),[h]);var oe=k?q:r,ie={expandedKeys:c,selectedKeys:i,loadedKeys:l,loadingKeys:s,checkedKeys:d,halfCheckedKeys:u,dragOverNodeKey:g,dropPosition:b,keyEntities:f};return o["createElement"](o["Fragment"],null,N&&C&&o["createElement"]("span",{style:fe,"aria-live":"assertive"},me(C)),o["createElement"]("div",{role:"tree"},o["createElement"]("input",{style:fe,disabled:!1===E||v,tabIndex:!1!==E?x:null,onKeyDown:j,onFocus:w,onBlur:S,value:"",onChange:ve})),o["createElement"]("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},o["createElement"]("div",{className:"".concat(n,"-indent")},o["createElement"]("div",{ref:M,className:"".concat(n,"-indent-unit")}))),o["createElement"](ce["a"],Object(a["a"])({},T,{data:oe,itemKey:Oe,height:O,fullHeight:!1,virtual:K,itemHeight:m,prefixCls:"".concat(n,"-list"),ref:I}),(function(e){var t=e.pos,n=e.data,r=n.key,c=Object(y["a"])(n,["key"]),i=e.isStart,d=e.isEnd,l=G(r,t);delete c.children;var s=X(l,ie);return o["createElement"](se,Object(a["a"])({},c,s,{active:!!C&&r===C.data.key,pos:t,data:e.data,isStart:i,isEnd:d,motion:k,motionNodes:r===he?Z:null,motionType:ne,onMotionStart:P,onMotionEnd:re,treeNodeRequiredProps:ie,onMouseMove:function(){D(null)}}))})))},Ee=o["forwardRef"](Ke);Ee.displayName="NodeList";var Ce=Ee;function Ne(e){var t=e.dropPosition,n=e.dropLevelOffset,a=e.indent,r={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(t){case-1:r.top=0,r.left=-n*a;break;case 1:r.bottom=0,r.left=-n*a;break;case 0:r.bottom=0,r.left=a;break}return o["createElement"]("div",{style:r})}var xe=function(e){Object(d["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.destroyed=!1,e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],dragging:!1,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null},e.dragStartMousePosition=null,e.listRef=o["createRef"](),e.onNodeDragStart=function(t,n){var a=e.state,r=a.expandedKeys,o=a.keyEntities,c=e.props.onDragStart,i=n.props.eventKey;e.dragNode=n,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var d=P(r,i);e.setState({dragging:!0,dragChildrenKeys:A(i,o),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(d),window.addEventListener("dragend",e.onWindowDragEnd),c&&c({event:t,node:z(n.props)})},e.onNodeDragEnter=function(t,n){var a=e.state,r=a.expandedKeys,o=a.keyEntities,c=a.dragChildrenKeys,i=a.flattenNodes,d=a.indent,l=e.props,u=l.onDragEnter,p=l.onExpand,f=l.allowDrop,v=l.direction,h=n.props.pos,y=Object(k["a"])(e),g=y.dragNode,b=V(t,n,d,e.dragStartMousePosition,f,i,o,r,v),O=b.dropPosition,m=b.dropLevelOffset,K=b.dropTargetKey,E=b.dropContainerKey,C=b.dropTargetPos,N=b.dropAllowed,x=b.dragOverNodeKey;g&&-1===c.indexOf(K)&&N?(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach((function(t){clearTimeout(e.delayedDragEnterLogic[t])})),g.props.eventKey!==n.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[h]=window.setTimeout((function(){if(e.state.dragging){var a=Object(s["a"])(r),c=o[n.props.eventKey];c&&(c.children||[]).length&&(a=L(r,n.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(a),p&&p(a,{node:z(n.props),expanded:!0,nativeEvent:t.nativeEvent})}}),800)),g.props.eventKey!==K||0!==m?(e.setState({dragOverNodeKey:x,dropPosition:O,dropLevelOffset:m,dropTargetKey:K,dropContainerKey:E,dropTargetPos:C,dropAllowed:N}),u&&u({event:t,node:z(n.props),expandedKeys:r})):e.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})):e.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},e.onNodeDragOver=function(t,n){var a=e.state,r=a.dragChildrenKeys,o=a.flattenNodes,c=a.keyEntities,i=a.expandedKeys,d=a.indent,l=e.props,s=l.onDragOver,u=l.allowDrop,p=l.direction,f=Object(k["a"])(e),v=f.dragNode,h=V(t,n,d,e.dragStartMousePosition,u,o,c,i,p),y=h.dropPosition,g=h.dropLevelOffset,b=h.dropTargetKey,O=h.dropContainerKey,m=h.dropAllowed,K=h.dropTargetPos,E=h.dragOverNodeKey;v&&-1===r.indexOf(b)&&m&&(v.props.eventKey===b&&0===g?null===e.state.dropPosition&&null===e.state.dropLevelOffset&&null===e.state.dropTargetKey&&null===e.state.dropContainerKey&&null===e.state.dropTargetPos&&!1===e.state.dropAllowed&&null===e.state.dragOverNodeKey||e.setState({dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1,dragOverNodeKey:null}):y===e.state.dropPosition&&g===e.state.dropLevelOffset&&b===e.state.dropTargetKey&&O===e.state.dropContainerKey&&K===e.state.dropTargetPos&&m===e.state.dropAllowed&&E===e.state.dragOverNodeKey||e.setState({dropPosition:y,dropLevelOffset:g,dropTargetKey:b,dropContainerKey:O,dropTargetPos:K,dropAllowed:m,dragOverNodeKey:E}),s&&s({event:t,node:z(n.props)}))},e.onNodeDragLeave=function(t,n){var a=e.props.onDragLeave;a&&a({event:t,node:z(n.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),r&&!a&&r({event:t,node:z(n.props)}),e.dragNode=null},e.onNodeDrop=function(t,n){var a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.state,c=o.dragChildrenKeys,i=o.dropPosition,d=o.dropTargetKey,l=o.dropTargetPos,s=o.dropAllowed;if(s){var u=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),null!==d){var p=Object(f["a"])(Object(f["a"])({},X(d,e.getTreeNodeRequiredProps())),{},{active:(null===(a=e.getActiveItem())||void 0===a?void 0:a.data.key)===d,data:e.state.keyEntities[d].node}),v=-1!==c.indexOf(d);Object(b["a"])(!v,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var h=T(l),y={event:t,node:z(p),dragNode:e.dragNode?z(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(c),dropToGap:0!==i,dropPosition:i+Number(h[h.length-1])};u&&!r&&u(y),e.dragNode=null}}},e.cleanDragState=function(){var t=e.state.dragging;t&&e.setState({dragging:!1,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null},e.onNodeClick=function(t,n){var a=e.props.onClick;a&&a(t,n)},e.onNodeDoubleClick=function(t,n){var a=e.props.onDoubleClick;a&&a(t,n)},e.onNodeSelect=function(t,n){var a=e.state.selectedKeys,r=e.state.keyEntities,o=e.props,c=o.onSelect,i=o.multiple,d=n.selected,l=n.key,s=!d;a=s?i?L(a,l):[l]:P(a,l);var u=a.map((function(e){var t=r[e];return t?t.node:null})).filter((function(e){return e}));e.setUncontrolledState({selectedKeys:a}),c&&c(a,{event:"select",selected:s,node:n,selectedNodes:u,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,n,a){var r,o=e.state,c=o.keyEntities,i=o.checkedKeys,d=o.halfCheckedKeys,l=e.props,u=l.checkStrictly,p=l.onCheck,f=n.key,v={event:"check",node:n,checked:a,nativeEvent:t.nativeEvent};if(u){var h=a?L(i,f):P(i,f),y=P(d,f);r={checked:h,halfChecked:y},v.checkedNodes=h.map((function(e){return c[e]})).filter((function(e){return e})).map((function(e){return e.node})),e.setUncontrolledState({checkedKeys:h})}else{var g=te([].concat(Object(s["a"])(i),[f]),!0,c),b=g.checkedKeys,k=g.halfCheckedKeys;if(!a){var O=new Set(b);O.delete(f);var m=te(Array.from(O),{checked:!1,halfCheckedKeys:k},c);b=m.checkedKeys,k=m.halfCheckedKeys}r=b,v.checkedNodes=[],v.checkedNodesPositions=[],v.halfCheckedKeys=k,b.forEach((function(e){var t=c[e];if(t){var n=t.node,a=t.pos;v.checkedNodes.push(n),v.checkedNodesPositions.push({node:n,pos:a})}})),e.setUncontrolledState({checkedKeys:b},!1,{halfCheckedKeys:k})}p&&p(r,v)},e.onNodeLoad=function(t){return new Promise((function(n){e.setState((function(a){var r=a.loadedKeys,o=void 0===r?[]:r,c=a.loadingKeys,i=void 0===c?[]:c,d=e.props,l=d.loadData,s=d.onLoad,u=t.key;if(!l||-1!==o.indexOf(u)||-1!==i.indexOf(u))return{};var p=l(t);return p.then((function(){var a=e.state,r=a.loadedKeys,o=a.loadingKeys,c=L(r,u),i=P(o,u);s&&s(c,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:c}),e.setState({loadingKeys:i}),n()})),{loadingKeys:L(i,u)}}))}))},e.onNodeMouseEnter=function(t,n){var a=e.props.onMouseEnter;a&&a({event:t,node:n})},e.onNodeMouseLeave=function(t,n){var a=e.props.onMouseLeave;a&&a({event:t,node:n})},e.onNodeContextMenu=function(t,n){var a=e.props.onRightClick;a&&(t.preventDefault(),a({event:t,node:n}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0}),t&&t.apply(void 0,arguments)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null),t&&t.apply(void 0,arguments)},e.getTreeNodeRequiredProps=function(){var t=e.state,n=t.expandedKeys,a=t.selectedKeys,r=t.loadedKeys,o=t.loadingKeys,c=t.checkedKeys,i=t.halfCheckedKeys,d=t.dragOverNodeKey,l=t.dropPosition,s=t.keyEntities;return{expandedKeys:n||[],selectedKeys:a||[],loadedKeys:r||[],loadingKeys:o||[],checkedKeys:c||[],halfCheckedKeys:i||[],dragOverNodeKey:d,dropPosition:l,keyEntities:s}},e.setExpandedKeys=function(t){var n=e.state.treeData,a=Y(n,t);e.setUncontrolledState({expandedKeys:t,flattenNodes:a},!0)},e.onNodeExpand=function(t,n){var a=e.state.expandedKeys,r=e.state.listChanging,o=e.props,c=o.onExpand,i=o.loadData,d=n.key,l=n.expanded;if(!r){var s=a.indexOf(d),u=!l;if(Object(b["a"])(l&&-1!==s||!l&&-1===s,"Expand state not sync with index check"),a=u?L(a,d):P(a,d),e.setExpandedKeys(a),c&&c(a,{node:n,expanded:u,nativeEvent:t.nativeEvent}),u&&i){var p=e.onNodeLoad(n);p&&p.then((function(){var t=Y(e.state.treeData,a);e.setUncontrolledState({flattenNodes:t})}))}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout((function(){e.setUncontrolledState({listChanging:!1})}))},e.onActiveChange=function(t){var n=e.state.activeKey,a=e.props.onActiveChange;n!==t&&(e.setState({activeKey:t}),null!==t&&e.scrollTo({key:t}),a&&a(t))},e.getActiveItem=function(){var t=e.state,n=t.activeKey,a=t.flattenNodes;return null===n?null:a.find((function(e){var t=e.data.key;return t===n}))||null},e.offsetActiveKey=function(t){var n=e.state,a=n.flattenNodes,r=n.activeKey,o=a.findIndex((function(e){var t=e.data.key;return t===r}));-1===o&&t<0&&(o=a.length),o=(o+t+a.length)%a.length;var c=a[o];if(c){var i=c.data.key;e.onActiveChange(i)}else e.onActiveChange(null)},e.onKeyDown=function(t){var n=e.state,a=n.activeKey,r=n.expandedKeys,o=n.checkedKeys,c=e.props,i=c.onKeyDown,d=c.checkable,l=c.selectable;switch(t.which){case re["a"].UP:e.offsetActiveKey(-1),t.preventDefault();break;case re["a"].DOWN:e.offsetActiveKey(1),t.preventDefault();break}var s=e.getActiveItem();if(s&&s.data){var u=e.getTreeNodeRequiredProps(),p=!1===s.data.isLeaf||!!(s.data.children||[]).length,v=z(Object(f["a"])(Object(f["a"])({},X(a,u)),{},{data:s.data,active:!0}));switch(t.which){case re["a"].LEFT:p&&r.includes(a)?e.onNodeExpand({},v):s.parent&&e.onActiveChange(s.parent.data.key),t.preventDefault();break;case re["a"].RIGHT:p&&!r.includes(a)?e.onNodeExpand({},v):s.children&&s.children.length&&e.onActiveChange(s.children[0].data.key),t.preventDefault();break;case re["a"].ENTER:case re["a"].SPACE:!d||v.disabled||!1===v.checkable||v.disableCheckbox?d||!l||v.disabled||!1===v.selectable||e.onNodeSelect({},v):e.onNodeCheck({},v,!o.includes(a));break}}i&&i(t)},e.setUncontrolledState=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e.destroyed){var r=!1,o=!0,c={};Object.keys(t).forEach((function(n){n in e.props?o=!1:(r=!0,c[n]=t[n])})),!r||n&&!o||e.setState(Object(f["a"])(Object(f["a"])({},c),a))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return Object(i["a"])(n,[{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"render",value:function(){var e,t=this.state,n=t.focused,c=t.flattenNodes,i=t.keyEntities,d=t.dragging,l=t.activeKey,s=t.dropLevelOffset,u=t.dropContainerKey,p=t.dropTargetKey,f=t.dropPosition,v=t.dragOverNodeKey,h=t.indent,y=this.props,g=y.prefixCls,b=y.className,k=y.style,O=y.showLine,E=y.focusable,C=y.tabIndex,N=void 0===C?0:C,x=y.selectable,j=y.showIcon,w=y.icon,S=y.switcherIcon,D=y.draggable,P=y.checkable,L=y.checkStrictly,T=y.disabled,I=y.motion,M=y.loadData,A=y.filterTreeNode,R=y.height,H=y.itemHeight,V=y.virtual,W=y.titleRender,F=y.dropIndicatorRender,B=y.onContextMenu,G=y.direction,U=_(this.props);return o["createElement"](K.Provider,{value:{prefixCls:g,selectable:x,showIcon:j,icon:w,switcherIcon:S,draggable:D,checkable:P,checkStrictly:L,disabled:T,keyEntities:i,dropLevelOffset:s,dropContainerKey:u,dropTargetKey:p,dropPosition:f,dragOverNodeKey:v,indent:h,direction:G,dropIndicatorRender:F,loadData:M,filterTreeNode:A,titleRender:W,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},o["createElement"]("div",{className:m()(g,b,(e={},Object(r["a"])(e,"".concat(g,"-show-line"),O),Object(r["a"])(e,"".concat(g,"-focused"),n),Object(r["a"])(e,"".concat(g,"-active-focused"),null!==l),e))},o["createElement"](Ce,Object(a["a"])({ref:this.listRef,prefixCls:g,style:k,data:c,disabled:T,selectable:x,checkable:!!P,motion:I,dragging:d,height:R,itemHeight:H,virtual:V,focusable:E,focused:n,tabIndex:N,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:B},this.getTreeNodeRequiredProps(),U))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n,a=t.prevProps,o={prevProps:e};function c(t){return!a&&t in e||a&&a[t]!==e[t]}if(c("treeData")?n=e.treeData:c("children")&&(Object(b["a"])(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=U(e.children)),n){o.treeData=n;var i=J(n);o.keyEntities=Object(f["a"])(Object(r["a"])({},he,ge),i.keyEntities)}var d,l=o.keyEntities||t.keyEntities;if(c("expandedKeys")||a&&c("autoExpandParent"))o.expandedKeys=e.autoExpandParent||!a&&e.defaultExpandParent?B(e.expandedKeys,l):e.expandedKeys;else if(!a&&e.defaultExpandAll){var s=Object(f["a"])({},l);delete s[he],o.expandedKeys=Object.keys(s).map((function(e){return s[e].key}))}else!a&&e.defaultExpandedKeys&&(o.expandedKeys=e.autoExpandParent||e.defaultExpandParent?B(e.defaultExpandedKeys,l):e.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,n||o.expandedKeys){var u=Y(n||t.treeData,o.expandedKeys||t.expandedKeys);o.flattenNodes=u}if((e.selectable&&(c("selectedKeys")?o.selectedKeys=W(e.selectedKeys,e):!a&&e.defaultSelectedKeys&&(o.selectedKeys=W(e.defaultSelectedKeys,e))),e.checkable)&&(c("checkedKeys")?d=F(e.checkedKeys)||{}:!a&&e.defaultCheckedKeys?d=F(e.defaultCheckedKeys)||{}:n&&(d=F(e.checkedKeys)||{checkedKeys:t.checkedKeys,halfCheckedKeys:t.halfCheckedKeys}),d)){var p=d,v=p.checkedKeys,h=void 0===v?[]:v,y=p.halfCheckedKeys,g=void 0===y?[]:y;if(!e.checkStrictly){var k=te(h,!0,l);h=k.checkedKeys,g=k.halfCheckedKeys}o.checkedKeys=h,o.halfCheckedKeys=g}return c("loadedKeys")&&(o.loadedKeys=e.loadedKeys),o}}]),n}(o["Component"]);xe.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Ne,allowDrop:function(){return!0}},xe.TreeNode=D;var je=xe,we=je,Se=o["createContext"](null);function De(e,t){if(!e)return!0;var n=e.data,a=n.disabled,r=n.disableCheckbox;switch(t){case"select":return a;case"checkbox":return a||r}return!1}function Pe(e,t){var n=o["useCallback"]((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"select",a=arguments.length>2?arguments[2]:void 0,r=e.get(t);return!a&&De(r,n)?null:r}),[e]),a=o["useCallback"]((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"select",a=arguments.length>2?arguments[2]:void 0,r=t.get(e);return!a&&De(r,n)?null:r}),[t]);return[n,a]}function Le(e){return o["useMemo"]((function(){var t=new Map,n=new Map;return e.forEach((function(e){t.set(e.key,e),n.set(e.data.value,e)})),[t,n]}),[e])}var Te={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ie=function(e,t){var n=e.prefixCls,a=e.height,r=e.itemHeight,c=e.virtual,i=e.options,d=e.flattenOptions,l=e.multiple,u=e.searchValue,f=e.onSelect,v=e.onToggleOpen,h=e.open,y=e.notFoundContent,g=e.onMouseEnter,b=o["useContext"](Se),k=b.checkable,O=b.checkedKeys,m=b.halfCheckedKeys,K=b.treeExpandedKeys,E=b.treeDefaultExpandAll,C=b.treeDefaultExpandedKeys,N=b.onTreeExpand,x=b.treeIcon,j=b.showTreeIcon,w=b.switcherIcon,S=b.treeLine,D=b.treeNodeFilterProp,P=b.loadData,L=b.treeLoadedKeys,T=b.treeMotion,I=b.onTreeLoad,M=o["useRef"](),A=Object(oe["a"])((function(){return i}),[h,i],(function(e,t){return t[0]&&e[1]!==t[1]})),R=Le(d),H=Object(p["a"])(R,2),V=H[0],W=H[1],F=Pe(V,W),B=Object(p["a"])(F,2),_=B[0],G=B[1],U=o["useMemo"]((function(){return O.map((function(e){var t=G(e);return t?t.key:null}))}),[O]),Y=o["useMemo"]((function(){return k?{checked:U,halfChecked:m}:null}),[U,m,k]);o["useEffect"]((function(){var e;h&&!l&&U.length&&(null===(e=M.current)||void 0===e||e.scrollTo({key:U[0]}))}),[h]);var q=String(u).toLowerCase(),J=function(e){return!!q&&String(e[D]).toLowerCase().includes(q)},X=o["useState"](C),z=Object(p["a"])(X,2),Q=z[0],Z=z[1],$=o["useState"](null),ee=Object(p["a"])($,2),te=ee[0],ne=ee[1],ae=o["useMemo"]((function(){return K?Object(s["a"])(K):u?te:Q}),[Q,te,q,K]);o["useEffect"]((function(){u&&ne(d.map((function(e){return e.key})))}),[u]);var ce=function(e){Z(e),ne(e),N&&N(e)},ie=function(e){e.preventDefault()},de=function(e,t){var n=t.node.key,a=_(n,k?"checkbox":"select");null!==a&&f(a.data.value,{selected:!O.includes(a.data.value)}),l||v(!1)},le=o["useState"](null),se=Object(p["a"])(le,2),ue=se[0],pe=se[1],fe=_(ue);if(o["useImperativeHandle"](t,(function(){return{onKeyDown:function(e){var t,n=e.which;switch(n){case re["a"].UP:case re["a"].DOWN:case re["a"].LEFT:case re["a"].RIGHT:null===(t=M.current)||void 0===t||t.onKeyDown(e);break;case re["a"].ENTER:null!==fe&&de(null,{node:{key:ue},selected:!O.includes(fe.data.value)});break;case re["a"].ESC:v(!1)}},onKeyUp:function(){}}})),0===A.length)return o["createElement"]("div",{role:"listbox",className:"".concat(n,"-empty"),onMouseDown:ie},y);var ve={};return L&&(ve.loadedKeys=L),ae&&(ve.expandedKeys=ae),o["createElement"]("div",{onMouseDown:ie,onMouseEnter:g},fe&&h&&o["createElement"]("span",{style:Te,"aria-live":"assertive"},fe.data.value),o["createElement"](we,Object.assign({ref:M,focusable:!1,prefixCls:"".concat(n,"-tree"),treeData:A,height:a,itemHeight:r,virtual:c,multiple:l,icon:x,showIcon:j,switcherIcon:w,showLine:S,loadData:u?null:P,motion:T,checkable:k,checkStrictly:!0,checkedKeys:Y,selectedKeys:k?[]:U,defaultExpandAll:E},ve,{onActiveChange:pe,onSelect:de,onCheck:de,onExpand:ce,onLoad:I,filterTreeNode:J})))},Me=o["forwardRef"](Ie);Me.displayName="OptionList";var Ae=Me,Re=function(){return null},He=Re;function Ve(e){return Object(g["a"])(e).map((function(e){if(!o["isValidElement"](e)||!e.type)return null;var t=e.key,n=e.props,a=n.children,r=n.value,c=Object(y["a"])(n,["children","value"]),i=Object(f["a"])({key:t,value:r},c),d=Ve(a);return d.length&&(i.children=d),i})).filter((function(e){return e}))}function We(e){if(!e)return e;var t=Object(f["a"])({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Object(b["a"])(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Fe(e,t,n,a,r){var c=null,i=null;function d(){function e(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.map((function(a,l){var s="".concat(r,"-").concat(l),u=n.includes(a.value),p=e(a.children||[],s,u),f=o["createElement"](He,Object.assign({},a),p.map((function(e){return e.node})));if(t===a.value&&(c=f),u){var v={pos:s,node:f,children:p};return d||i.push(v),v}return null})).filter((function(e){return e}))}i||(i=[],e(a),i.sort((function(e,t){var a=e.node.props.value,r=t.node.props.value,o=n.indexOf(a),c=n.indexOf(r);return o-c})))}Object.defineProperty(e,"triggerNode",{get:function(){return Object(b["a"])(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),d(),c}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return Object(b["a"])(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),d(),r?i:i.map((function(e){var t=e.node;return t}))}})}function Be(e){return Array.isArray(e)?e:void 0!==e?[e]:[]}function _e(e,t){var n=new Map;return t.forEach((function(e){var t=e.data;n.set(t.value,t)})),e.map((function(e){return We(n.get(e))}))}function Ge(e,t){var n=_e([e],t)[0];return!!n&&n.disabled}function Ue(e){return e.disabled||e.disableCheckbox||!1===e.checkable}function Ye(e){var t=e.parent,n=0,a=t;while(a)a=a.parent,n+=1;return n}function qe(e){function t(e){return(e||[]).map((function(e){var n=e.value,a=e.key,r=e.children,o=Object(f["a"])(Object(f["a"])({},e),{},{key:"key"in e?a:n});return r&&(o.children=t(r)),o}))}var n=Y(t(e),!0);return n.map((function(e){return{key:e.data.key,data:e.data,level:Ye(e)}}))}function Je(e){return function(t,n){var a=n[e];return String(a).toLowerCase().includes(String(t).toLowerCase())}}function Xe(e,t,n){var a,r=n.optionFilterProp,o=n.filterOption;if(!1===o)return t;function c(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.map((function(t){var r=t.children,o=n||a(e,We(t)),i=c(r||[],o);return o||i.length?Object(f["a"])(Object(f["a"])({},t),{},{children:i}):null})).filter((function(e){return e}))}return a="function"===typeof o?o:Je(r),c(t)}function ze(e,t,n,a){var r=new Map;return Be(t).forEach((function(e){e&&"object"===Object(u["a"])(e)&&"value"in e&&r.set(e.value,e)})),e.map((function(e){var t={value:e},o=n(e,"select",!0),c=o?a(o.data):e;if(r.has(e)){var i=r.get(e);t.label="label"in i?i.label:c,"halfChecked"in i&&(t.halfChecked=i.halfChecked)}else t.label=c;return t}))}function Qe(e,t){var n=new Set(e);return n.add(t),Array.from(n)}function Ze(e,t){var n=new Set(e);return n.delete(t),Array.from(n)}function $e(e,t){var n=t.id,a=t.pId,r=t.rootPId,o={},c=[],i=e.map((function(e){var t=Object(f["a"])({},e),a=t[n];return o[a]=t,t.key=t.key||a,t}));return i.forEach((function(e){var t=e[a],n=o[t];n&&(n.children=n.children||[],n.children.push(e)),(t===r||!n&&null===r)&&c.push(e)})),c}function et(e,t){new Set;function n(e){return(e||[]).map((function(e){var a=e.key,r=e.value,o=e.children,c=Object(y["a"])(e,["key","value","children"]),i="value"in e?r:a,d=Object(f["a"])(Object(f["a"])({},c),{},{key:null!==a&&void 0!==a?a:i,value:i,title:t(e)});return"children"in e&&(d.children=n(o)),d}))}return n(e)}function tt(e,t,n){var a=n.getLabelProp,r=n.simpleMode,c=o["useRef"]({});return e?(c.current.formatTreeData=c.current.treeData===e?c.current.formatTreeData:et(r?$e(e,Object(f["a"])({id:"id",pId:"pId",rootPId:null},!0!==r?r:{})):e,a),c.current.treeData=e):c.current.formatTreeData=c.current.children===t?c.current.formatTreeData:et(Ve(t),a),c.current.formatTreeData}var nt="SHOW_ALL",at="SHOW_PARENT",rt="SHOW_CHILD";function ot(e,t,n){var a=new Set(e);return t===rt?e.filter((function(e){var t=n[e];return!(t&&t.children&&t.children.every((function(e){var t=e.node;return Ue(t)||a.has(t.key)})))})):t===at?e.filter((function(e){var t=n[e],r=t?t.parent:null;return!(r&&!Ue(r.node)&&a.has(r.node.key))})):e}function ct(e,t){var n=t.value,a=t.getEntityByValue,r=t.getEntityByKey,c=t.treeConduction,i=t.showCheckedStrategy,d=t.conductKeyEntities,l=t.getLabelProp;return o["useMemo"]((function(){var t=e;if(c){var o=ot(e.map((function(e){var t=a(e);return t?t.key:e})),i,d);t=o.map((function(e){var t=r(e);return t?t.data.value:e}))}return ze(t,n,a,l)}),[e,n,c,i,a])}var it=["expandedKeys","treeData","treeCheckable","showCheckedStrategy","searchPlaceholder","treeLine","treeIcon","showTreeIcon","switcherIcon","treeNodeFilterProp","filterTreeNode","dropdownPopupAlign","treeDefaultExpandAll","treeCheckStrictly","treeExpandedKeys","treeLoadedKeys","treeMotion","onTreeExpand","onTreeLoad","loadData","treeDataSimpleMode","treeNodeLabelProp","treeDefaultExpandedKeys"],dt=Object(v["a"])({prefixCls:"rc-tree-select",components:{optionList:Ae},convertChildrenToData:function(){return null},flattenOptions:qe,getLabeledValue:h["e"],filterOptions:Xe,isValueDisabled:Ge,findValueOption:_e,omitDOMProps:function(e){var t=Object(f["a"])({},e);return it.forEach((function(e){delete t[e]})),t}});dt.displayName="Select";var lt=o["forwardRef"]((function(e,t){var n=e.multiple,a=e.treeCheckable,r=e.treeCheckStrictly,c=e.showCheckedStrategy,i=void 0===c?"SHOW_CHILD":c,d=e.labelInValue,l=e.loadData,f=e.treeLoadedKeys,v=e.treeNodeFilterProp,h=void 0===v?"value":v,y=e.treeNodeLabelProp,g=e.treeDataSimpleMode,k=e.treeData,O=e.treeExpandedKeys,m=e.treeDefaultExpandedKeys,K=e.treeDefaultExpandAll,E=e.children,C=e.treeIcon,N=e.showTreeIcon,x=e.switcherIcon,j=e.treeLine,w=e.treeMotion,S=e.filterTreeNode,D=e.dropdownPopupAlign,P=e.onChange,L=e.onTreeExpand,T=e.onTreeLoad,I=e.onDropdownVisibleChange,M=e.onSelect,A=e.onDeselect,R=a||r,H=n||R,V=a&&!r,W=r||d,F=o["useRef"](null);o["useImperativeHandle"](t,(function(){return{focus:F.current.focus,blur:F.current.blur}}));var B=function(e){return k&&e.label||e.title},_=function(e){return y?e[y]:B(e)},G=tt(k,E,{getLabelProp:B,simpleMode:g}),U=Object(o["useMemo"])((function(){return qe(G)}),[G]),Y=Le(U),q=Object(p["a"])(Y,2),X=q[0],z=q[1],Q=Pe(X,z),Z=Object(p["a"])(Q,2),$=Z[0],ee=Z[1],re=Object(o["useMemo"])((function(){return V?J(G):{keyEntities:null}}),[G,a,r]),oe=re.keyEntities,ce=Object(ae["a"])(e.defaultValue,{value:e.value}),ie=Object(p["a"])(ce,2),de=ie[0],le=ie[1],se=function(e){var t=[],n=[];return e.forEach((function(e){ee(e)?n.push(e):t.push(e)})),{missingRawValues:t,existRawValues:n}},ue=Object(o["useMemo"])((function(){var e=[],t=[];if(Be(de).forEach((function(n){if(n&&"object"===Object(u["a"])(n)&&"value"in n)if(n.halfChecked&&r){var a=ee(n.value);e.push(a?a.key:n.value)}else t.push(n.value);else t.push(n)})),V){var n=se(t),a=n.missingRawValues,o=n.existRawValues,c=o.map((function(e){return ee(e).key})),i=te(c,!0,oe),d=i.checkedKeys,l=i.halfCheckedKeys;return[[].concat(Object(s["a"])(a),Object(s["a"])(d.map((function(e){return $(e).data.value})))),l]}return[t,e]}),[de,H,W,a,r]),pe=Object(p["a"])(ue,2),fe=pe[0],ve=pe[1],he=ct(fe,{treeConduction:V,value:de,showCheckedStrategy:i,conductKeyEntities:oe,getEntityByValue:ee,getEntityByKey:$,getLabelProp:_}),ye=function(e,t,n){if(le(H?e:e[0]),P){var a=e;if(V&&"SHOW_ALL"!==i){var o=e.map((function(e){var t=ee(e);return t?t.key:e})),c=ot(o,i,oe);a=c.map((function(e){var t=$(e);return t?t.data.value:e}))}var d=t||{triggerValue:void 0,selected:void 0},l=d.triggerValue,u=d.selected,p=W?ze(a,de,ee,_):a;if(r){var f=ve.map((function(e){var t=$(e);return t?t.data.value:e})).filter((function(e){return!a.includes(e)}));p=[].concat(Object(s["a"])(p),Object(s["a"])(ze(f,de,ee,_)))}var v={preValue:he,triggerValue:l},h=!0;(r||"selection"===n&&!u)&&(h=!1),Fe(v,l,e,G,h),R?v.checked=u:v.selected=u,P(H?p:p[0],W?null:a.map((function(e){var t=ee(e);return t?_(t.data):null})),v)}},ge=function(e,t,n){var a=e;if(H){var r=Qe(fe,e);if(V){var o=se(r),c=o.missingRawValues,i=o.existRawValues,d=i.map((function(e){return ee(e).key})),l=te(d,!0,oe),u=l.checkedKeys;r=[].concat(Object(s["a"])(c),Object(s["a"])(u.map((function(e){return $(e).data.value}))))}ye(r,{selected:!0,triggerValue:e},n)}else ye([e],{selected:!0,triggerValue:e},n);M&&M(a,t)},be=function(e,t,n){var a=e,r=Ze(fe,e);if(V){var o=se(r),c=o.missingRawValues,i=o.existRawValues,d=i.map((function(e){return ee(e).key})),l=te(d,{checked:!1,halfCheckedKeys:ve},oe),u=l.checkedKeys;r=[].concat(Object(s["a"])(c),Object(s["a"])(u.map((function(e){return $(e).data.value}))))}ye(r,{selected:!1,triggerValue:e},n),A&&A(a,t)},ke=function(){ye([],null,"clear")},Oe=o["useCallback"]((function(e){if(I){var t={};Object.defineProperty(t,"documentClickClose",{get:function(){return Object(b["a"])(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),I(e,t)}}),[I]);var me={optionLabelProp:null,optionFilterProp:h,dropdownAlign:D,internalProps:{mark:ne["a"],onClear:ke,skipTriggerChange:!0,skipTriggerSelect:!0,onRawSelect:ge,onRawDeselect:be}};return"filterTreeNode"in e&&(me.filterOption=S),o["createElement"](Se.Provider,{value:{checkable:R,loadData:l,treeLoadedKeys:f,onTreeLoad:T,checkedKeys:fe,halfCheckedKeys:ve,treeDefaultExpandAll:K,treeExpandedKeys:O,treeDefaultExpandedKeys:m,onTreeExpand:L,treeIcon:C,treeMotion:w,showTreeIcon:N,switcherIcon:x,treeLine:j,treeNodeFilterProp:h}},o["createElement"](dt,Object.assign({ref:F,mode:H?"multiple":null},e,me,{value:he,labelInValue:!0,options:G,onChange:null,onSelect:null,onDeselect:null,onDropdownVisibleChange:Oe})))})),st=function(e){Object(d["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.apply(this,arguments),e.selectRef=o["createRef"](),e.focus=function(){e.selectRef.current.focus()},e.blur=function(){e.selectRef.current.blur()},e}return Object(i["a"])(n,[{key:"render",value:function(){return o["createElement"](lt,Object.assign({ref:this.selectRef},this.props))}}]),n}(o["Component"]);st.TreeNode=He,st.SHOW_ALL=nt,st.SHOW_PARENT=at,st.SHOW_CHILD=rt;var ut=st,pt=ut,ft=n("TOVV"),vt=n("gJFp"),ht=n("8l3A"),yt=n("vftN"),gt=n("87xV"),bt=n("5OIp"),kt=n("nmPy"),Ot=n("IChY"),mt=n("M51T"),Kt=n("WHOR");function Et(e,t,n,a){var r,c=a.isLeaf,i=a.expanded,d=a.loading;if(d)return o["createElement"](gt["a"],{className:"".concat(e,"-switcher-loading-icon")});if(n&&"object"===Object(u["a"])(n)&&(r=n.showLeafIcon),c)return n?"object"!==Object(u["a"])(n)||r?o["createElement"](bt["a"],{className:"".concat(e,"-switcher-line-icon")}):o["createElement"]("span",{className:"".concat(e,"-switcher-leaf-line")}):null;var l="".concat(e,"-switcher-icon");return Object(Kt["b"])(t)?Object(Kt["a"])(t,{className:m()(t.props.className||"",l)}):t||(n?i?o["createElement"](kt["a"],{className:"".concat(e,"-switcher-line-icon")}):o["createElement"](Ot["a"],{className:"".concat(e,"-switcher-line-icon")}):o["createElement"](mt["a"],{className:l}))}var Ct=n("kQXs"),Nt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},xt=function(e,t){var n,c=e.prefixCls,i=e.size,d=e.bordered,l=void 0===d||d,s=e.className,u=e.treeCheckable,p=e.multiple,f=e.listHeight,v=void 0===f?256:f,h=e.listItemHeight,y=void 0===h?26:h,g=e.notFoundContent,b=e.switcherIcon,k=e.treeLine,O=e.getPopupContainer,K=e.dropdownClassName,E=e.treeIcon,C=void 0!==E&&E,N=e.transitionName,x=void 0===N?"slide-up":N,j=e.choiceTransitionName,w=void 0===j?"":j,S=Nt(e,["prefixCls","size","bordered","className","treeCheckable","multiple","listHeight","listItemHeight","notFoundContent","switcherIcon","treeLine","getPopupContainer","dropdownClassName","treeIcon","transitionName","choiceTransitionName"]),D=o["useContext"](vt["b"]),P=D.getPopupContainer,L=D.getPrefixCls,T=D.renderEmpty,I=D.direction,M=D.virtual,A=D.dropdownMatchSelectWidth,R=o["useContext"](Ct["b"]);Object(ht["a"])(!1!==p||!u,"TreeSelect","`multiple` will alway be `true` when `treeCheckable` is true");var H,V=L("select",c),W=L("select-tree",c),F=L("tree-select",c),B=m()(K,"".concat(F,"-dropdown"),Object(r["a"])({},"".concat(F,"-dropdown-rtl"),"rtl"===I)),_=!(!u&&!p),G=Object(yt["a"])(Object(a["a"])(Object(a["a"])({},S),{multiple:_,prefixCls:V})),U=G.suffixIcon,Y=G.removeIcon,q=G.clearIcon;H=void 0!==g?g:T("Select");var J=Object(ft["a"])(S,["suffixIcon","itemIcon","removeIcon","clearIcon","switcherIcon"]),X=i||R,z=m()(!c&&F,(n={},Object(r["a"])(n,"".concat(V,"-lg"),"large"===X),Object(r["a"])(n,"".concat(V,"-sm"),"small"===X),Object(r["a"])(n,"".concat(V,"-rtl"),"rtl"===I),Object(r["a"])(n,"".concat(V,"-borderless"),!l),n),s);return o["createElement"](pt,Object(a["a"])({virtual:M,dropdownMatchSelectWidth:A},J,{ref:t,prefixCls:V,className:z,listHeight:v,listItemHeight:y,treeCheckable:u?o["createElement"]("span",{className:"".concat(V,"-tree-checkbox-inner")}):u,inputIcon:U,multiple:p,removeIcon:Y,clearIcon:q,switcherIcon:function(e){return Et(W,b,k,e)},showTreeIcon:C,notFoundContent:H,getPopupContainer:O||P,treeMotion:null,dropdownClassName:B,choiceTransitionName:w,transitionName:x}))},jt=o["forwardRef"](xt),wt=jt;wt.TreeNode=He,wt.SHOW_ALL=nt,wt.SHOW_PARENT=at,wt.SHOW_CHILD=rt;t["a"]=wt}}]);